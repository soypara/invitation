<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Mamii's invitation üíú</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
    <style>
        /* ====== BODY ====== */
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Dancing Script', cursive;
            background: linear-gradient(120deg, #7b2ff7, #ff5edf, #ffffff);
            background-size: 300% 300%;
            animation: colors 10s ease infinite;
            flex-direction: column;
            text-align: center;
            overflow: hidden;
        }

        @keyframes colors {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #envelope {
            width: 350px;
            height: 220px;
            background: #fff;
            border-radius: 15px;
            position: relative;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 3px solid #4b006e;
        }

        .heart {
            position: absolute;
            bottom: 80px;
            font-size: 60px;
            z-index: 3;
        }

        .flap-back {
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            border-left: 175px solid transparent;
            border-right: 175px solid transparent;
            border-top: 110px solid #0f0606;
            z-index: 1;
        }

        .flap-front {
            position: absolute;
            top: 0;
            left: 2.5px;
            width: 0;
            height: 0;
            border-left: 172px solid transparent;
            border-right: 172px solid transparent;
            border-top: 107px solid #f6f3fa;
            z-index: 2;
            transform-origin: top center;
            transition: transform 1s ease;
            box-shadow: inset 0 0 0 2px black;
        }

        .noticee {
            margin-top: 120px;
            font-size: 34px;
            color: #4b006e;
        }

        #notice {
            margin-top: 20px;
            font-size: 24px;
            color: #4b006e;
        }

        /* ====== EMOJIS FLOTANTS ====== */
        .emojis {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .emojis span {
            position: absolute;
            font-size: 120px;
            opacity: 0.15;
            animation: emo linear infinite;
        }

        @keyframes emo {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* EMOJIS QUARTS - garde toutes les positions exactes */
        .emojis span:nth-child(1)  { top: 8%;  left: 12%; animation-duration: 26s; }
        .emojis span:nth-child(2)  { top: 22%; left: 28%; animation-duration: 31s; }
        .emojis span:nth-child(3)  { top: 38%; left: 10%; animation-duration: 21s; }
        .emojis span:nth-child(4)  { top: 10%; left: 68%; animation-duration: 34s; }
        .emojis span:nth-child(5)  { top: 26%; left: 85%; animation-duration: 29s; }
        .emojis span:nth-child(6)  { top: 42%; left: 60%; animation-duration: 33s; }
        .emojis span:nth-child(7)  { top: 58%; left: 15%; animation-duration: 27s; }
        .emojis span:nth-child(8)  { top: 74%; left: 32%; animation-duration: 30s; }
        .emojis span:nth-child(9)  { top: 88%; left: 8%;  animation-duration: 22s; }
        .emojis span:nth-child(10) { top: 60%; left: 70%; animation-duration: 36s; }
        .emojis span:nth-child(11) { top: 78%; left: 88%; animation-duration: 28s; }
        .emojis span:nth-child(12) { top: 90%; left: 55%; animation-duration: 32s; }

        /* ====== CONTENU PRINCIPAL ====== */
        .container {
            position: relative;
            z-index: 1;
            margin-top: 50px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 40px;
            flex-wrap: wrap; /* pour que les blocs se placent correctement sur petit √©cran */
        }

        .photo {
            width: 400px;
            height: 400px;
            background-color: #fff;
            border-radius: 20px;
            overflow: hidden;
        }

        .photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .texte {
            width: 700px;
            text-align: left;
            font-size: 35px;
            color: #4b006e;
        }

        button {
            font-size: 24px;
            padding: 15px 40px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: 0.3s;
        }

        #yes {
            background: #7b2ff7;
            color: white;
            box-shadow: 0 0 20px rgba(123,47,247,0.6);
            position: fixed;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 2;
        }

        #no {
            position: fixed;
            bottom: 50px;
            left: calc(50% + 180px);
            background: white;
            color: black;
            width: 150px;
            height: 60px;
            font-size: 20px;
            text-align: center;
            border-radius: 12px;
            z-index: 2;
            transition: 0.3s;
        }

        /* ====== RESPONSIVE ====== */
        @media (max-width: 1024px) {
            .texte { font-size: 28px; width: 500px; }
            .photo { width: 300px; height: 300px; }
        }

        @media (max-width: 768px) {
            .texte { font-size: 24px; width: 90%; }
            .photo { width: 250px; height: 250px; }
            #yes { bottom: 40px; }
            #no { bottom: 40px; left: 60%; }
        }

        @media (max-width: 480px) {
            .container { flex-direction: column; gap: 20px; }
            .texte { font-size: 20px; width: 90%; }
            .photo { width: 200px; height: 200px; }
            #yes { bottom: 30px; font-size: 20px; padding: 12px 30px; }
            #no { bottom: 30px; font-size: 18px; width: 140px; height: 50px; left: 55%; }
        }
    </style>
</head>
<body>
    <!-- EMOJIS -->
    <div class="emojis">
        <span>üíï</span><span>üåπ</span><span>üé∂</span>
        <span>üíï</span><span>üåπ</span><span>üé∂</span>
        <span>üíï</span><span>üåπ</span><span>üé∂</span>
        <span>üíï</span><span>üåπ</span><span>üé∂</span>
    </div>

    <!-- PAGE D'INTRO -->
    <div id="intro">
        <div id="envelope">
            <p class="noticee"><strong>For Mamy</strong></p>
            <div class="heart">‚ù§Ô∏è</div>
            <div class="flap-back"></div>
            <div class="flap-front"></div>
        </div>
        <div id="notice">√âcouteurs recommand√©s üéß <br> (cliquer pour ouvrir)</div>
    </div>

    <!-- CONTENU PRINCIPAL -->
    <div id="mainContent" style="display:none;">
        <div class="container">
            <div class="photo" id="photo">
                <img src="hamster.jpeg" alt="Photo initiale">
            </div>
            <div class="texte" id="texte">
               <strong>
                 Roses are red, violets are blue <br>
                 I wrote this poem thinking of you <br>
                 Imagining your smile while reading my text <br>
                 A feeling rises right in my chest <br>
                 You are pretty, a masterpiece of art <br>
                 These beautiful eyes got me from the start <br>
                 For one day, could I call you mine? <br>
                 I mean... will you be my Valentine? <br>
               </strong>
            </div>
        </div>

        <button id="yes">Oui‚ù§Ô∏è</button>
        <button id="no">Nonüíî</button>

        <!-- MUSIQUE -->
        <audio id="music" loop>
            <source src="beforeu.mpeg" type="audio/mpeg">
        </audio>
    </div>

    <script>
        // ====== INTRO ======
        const envelope = document.getElementById("envelope");
        const intro = document.getElementById("intro");
        const mainContent = document.getElementById("mainContent");
        const music = document.getElementById("music");
        const flapFront = document.querySelector(".flap-front");

        envelope.addEventListener("click", () => {
            flapFront.style.transform = "rotateX(-180deg)";
            envelope.style.transition = "transform 1s ease";
            setTimeout(() => {
                intro.style.display = "none";
                mainContent.style.display = "block";
                music.currentTime = 0;
                music.play();
            }, 1000);
        });

        // ====== BOUTONS ======
        const yesBtn = document.getElementById("yes");
        const noBtn = document.getElementById("no");
        const offsetX = 1000, offsetY = 575;
        const initialNoPosition = { left: noBtn.offsetLeft + offsetX, top: noBtn.offsetTop + offsetY };
        const texteDiv = document.getElementById("texte");
        const photoDiv = document.getElementById("photo");

        let yesSize = 24;
        let noCount = 0;
        let fleeCount = 0;

        const phrases = [
            "Plizzyyy üò≠üò≠üò≠",
            "AAAAHHHHHHH Tu vas me faire faire un arr√™t cardiaque \n\n\n t'es sur\?\?",
            "Allez‚Ä¶ dis oui tu le veux en quelle langue\?üòîüòîüòî \n\n¬øQuieres ser mi Valentina?\nÁßÅ„ÅÆ„Éê„É¨„É≥„Çø„Ç§„É≥„Å´„Å™„Å£„Å¶„Åè„Çå„Åæ„Åô„Åã\?\n–•–æ—á–µ—à—å –±—ã—Ç—å –º–æ–µ–π –í–∞–ª–µ–Ω—Ç–∏–Ω–æ–π\?",
            "OKA NAMA A üò•\! \n\n\n\n Mba ataovy izay hifanarahana",
            "Ok c'est bon t'a plus le droit de dire non üôÑ"
        ];

        const photos = [
            "cry.jpeg",
            "scared.jpeg",
            "pray.jpeg",
            "stooop.jpeg",
            "stop.jpeg"
        ];

        // Bouton NON qui fuit
        noBtn.addEventListener("mouseover", () => {
            if (fleeCount < 2) {
                const maxX = window.innerWidth - noBtn.offsetWidth;
                const maxY = window.innerHeight - noBtn.offsetHeight;
                const x = Math.random() * maxX;
                const y = Math.random() * maxY;
                noBtn.style.left = x + "px";
                noBtn.style.top = y + "px";
                yesSize += 8;
                yesBtn.style.fontSize = yesSize + "px";
                moveYesButton();
                fleeCount++;
            } else if (fleeCount === 2) {
                noBtn.style.left = initialNoPosition.left + "px";
                noBtn.style.top = initialNoPosition.top + "px";
                fleeCount++;
            }
        });

        noBtn.addEventListener("click", () => {
            if (fleeCount >= 3) {
                if (noCount < phrases.length) {
                    texteDiv.innerText = phrases[noCount];
                    photoDiv.querySelector('img').src = photos[noCount];

                    if (phrases[noCount].includes("arr√™t cardiaque")) {
                        noBtn.innerText = "Toujours nonüíî";
                        noBtn.style.width = "240px";
                        noBtn.style.fontSize = "22px";
                        noBtn.style.padding = "10px 20px";
                    }

                    if (noCount === phrases.length - 1) {
                        noBtn.style.transition = "0.4s";
                        noBtn.style.opacity = "0";
                        noBtn.style.pointerEvents = "none";
                    }

                    noCount++;
                }
                yesSize += 20;
                yesBtn.style.fontSize = yesSize + "px";
                moveYesButton();
                repulseNoIfOverlap();
            }
        });

        yesBtn.addEventListener("click", () => {
            document.querySelector(".container").style.display = "none";
            yesBtn.style.display = "none";
            noBtn.style.display = "none";

            const thankYouDiv = document.createElement("div");
            thankYouDiv.style.textAlign = "center";
            thankYouDiv.style.marginTop = "50px";
            thankYouDiv.innerHTML = `
                <h1>Yuppiii\!\!\!\! üíïü•∞</h1>
                <h2>Merci d‚Äôavoir dit oui üíú <br>
                (m√™me si tu n'avait pas trop le choix)<br>
                Mais honn√™temment, je serais honor√© de pouvoir √™tre ton partenaire, je souhaite de tout coeur que 
                cette petite attention de ma part te plait <br>
                Pour te remercier, voici des fleurs assortis √† la beaut√© de tes yeux üåπ</h2>
                <div style="display:flex; justify-content:center; margin-top:30px;">
                    <img src="bouquet.jpeg" alt="Photo de remerciement" style="width:500px; height:500px; border-radius:20px;">
                </div>
            `;
            document.body.appendChild(thankYouDiv);
        });

        function moveYesButton() {
            const baseBottom = 50;
            const baseLeft = window.innerWidth / 2;
            const shift = (yesSize - 24) * 1.2;
            yesBtn.style.bottom = (baseBottom + shift * 0.4) + "px";
            yesBtn.style.left = (baseLeft + shift) + "px";
            yesBtn.style.transform = "translateX(-50%)";
        }

        function repulseNoIfOverlap() {
            const yesRect = yesBtn.getBoundingClientRect();
            const noRect = noBtn.getBoundingClientRect();
            const overlap =
                yesRect.right > noRect.left &&
                yesRect.left < noRect.right &&
                yesRect.bottom > noRect.top &&
                yesRect.top < noRect.bottom;

            if (overlap) {
                let offsetX = (Math.random() > 0.5 ? 1 : -1) * (noRect.width + 30);
                let offsetY = (Math.random() > 0.5 ? 1 : -1) * (noRect.height + 30);
                let newLeft = Math.min(Math.max(noRect.left + offsetX, 0), window.innerWidth - noRect.width);
                let newTop = Math.min(Math.max(noRect.top + offsetY, 0), window.innerHeight - noRect.height);
                noBtn.style.left = newLeft + "px";
                noBtn.style.top = newTop + "px";
            }
        }
    </script>
</body>
</html>
